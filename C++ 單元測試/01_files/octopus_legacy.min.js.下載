!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t(function(t){!function(e){var n,o=Object.prototype,r=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=y;var u="suspendedStart",h="suspendedYield",d="executing",f="completed",p={},v={};v[a]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(L([])));g&&g!==o&&r.call(g,a)&&(v=g);var m=E.prototype=k.prototype=Object.create(v);b.prototype=m.constructor=E,E.constructor=b,E[s]=b.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},l.awrap=function(t){return{__await:t}},x(P.prototype),P.prototype[c]=function(){return this},l.AsyncIterator=P,l.async=function(t,e,n,o){var r=new P(y(t,e,n,o));return l.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},x(m),m[s]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},l.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,r){return c.type="throw",c.arg=t,e.next=o,r&&(e.method="next",e.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:L(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=n),p}}}function y(t,e,n,o){var r,i,a,c,s=e&&e.prototype instanceof k?e:k,l=Object.create(s.prototype),v=new O(o||[]);return l._invoke=(r=t,i=n,a=v,c=u,function(t,e){if(c===d)throw new Error("Generator is already running");if(c===f){if("throw"===t)throw e;return D()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var o=S(n,a);if(o){if(o===p)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===u)throw c=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var s=w(r,i,a);if("normal"===s.type){if(c=a.done?f:h,s.arg===p)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(c=f,a.method="throw",a.arg=s.arg)}}),l}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function k(){}function b(){}function E(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function P(t){var e;this._invoke=function(n,o){function i(){return new Promise(function(e,i){!function e(n,o,i,a){var c=w(t[n],t,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(l).then(function(t){s.value=t,i(s)},a)}a(c.arg)}(n,o,e,i)})}return e=e?e.then(i,i):i()}}function S(t,e){var o=t.iterator[e.method];if(o===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,S(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=w(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}),n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,r=o&&n.regeneratorRuntime;n.regeneratorRuntime=void 0;var i=e;if(o)n.regeneratorRuntime=r;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}var a=i,c=Math.ceil,s=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?s:c)(t)},u=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},h=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),d=t(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),f=(d.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),p=function(t,e,n){if(f(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}},v=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_=function(t){if(!v(t))throw TypeError(t+" is not an object!");return t},g=function(t){try{return!!t()}catch(t){return!0}},m=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),y=h.document,w=v(y)&&v(y.createElement),k=function(t){return w?y.createElement(t):{}},b=!m&&!g(function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a}),E=function(t,e){if(!v(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!v(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!v(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!v(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,P={f:m?Object.defineProperty:function(t,e,n){if(_(t),e=E(e,!0),_(n),b)try{return x(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},T=m?function(t,e,n){return P.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},j="prototype",O=function(t,e,n){var o,r,i,a=t&O.F,c=t&O.G,s=t&O.S,l=t&O.P,u=t&O.B,f=t&O.W,v=c?d:d[e]||(d[e]={}),_=v[j],g=c?h:s?h[e]:(h[e]||{})[j];c&&(n=e);for(o in n)(r=!a&&g&&void 0!==g[o])&&o in v||(i=r?g[o]:n[o],v[o]=c&&"function"!=typeof g[o]?n[o]:u&&r?p(i,h):f&&g[o]==i?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e[j]=t[j],e}(i):l&&"function"==typeof i?p(Function.call,i):i,l&&((v.virtual||(v.virtual={}))[o]=i,t&O.R&&_&&!_[o]&&T(_,o,i)))};O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var L,D=O,N=T,C={}.hasOwnProperty,H=function(t,e){return C.call(t,e)},A={},B={}.toString,M=function(t){return B.call(t).slice(8,-1)},I=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==M(t)?t.split(""):Object(t)},R=function(t){return I(u(t))},F=Math.min,G=function(t){return t>0?F(l(t),9007199254740991):0},q=Math.max,W=Math.min,z="__core-js_shared__",Y=h[z]||(h[z]={}),V=function(t){return Y[t]||(Y[t]={})},U=0,K=Math.random(),Z=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++U+K).toString(36))},J=V("keys"),X=function(t){return J[t]||(J[t]=Z(t))},$=(L=!1,function(t,e,n){var o,r,i,a=R(t),c=G(a.length),s=(r=c,(o=l(o=n))<0?q(o+r,0):W(o,r));if(L&&e!=e){for(;c>s;)if((i=a[s++])!=i)return!0}else for(;c>s;s++)if((L||s in a)&&a[s]===e)return L||s||0;return!L&&-1}),Q=X("IE_PROTO"),tt=function(t,e){var n,o=R(t),r=0,i=[];for(n in o)n!=Q&&H(o,n)&&i.push(n);for(;e.length>r;)H(o,n=e[r++])&&(~$(i,n)||i.push(n));return i},et="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),nt=Object.keys||function(t){return tt(t,et)},ot=m?Object.defineProperties:function(t,e){_(t);for(var n,o=nt(e),r=o.length,i=0;r>i;)P.f(t,n=o[i++],e[n]);return t},rt=h.document,it=rt&&rt.documentElement,at=X("IE_PROTO"),ct=function(){},st="prototype",lt=function(){var t,e=k("iframe"),n=et.length;for(e.style.display="none",it.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),lt=t.F;n--;)delete lt[st][et[n]];return lt()},ut=Object.create||function(t,e){var n;return null!==t?(ct[st]=_(t),n=new ct,ct[st]=null,n[at]=t):n=lt(),void 0===e?n:ot(n,e)},ht=t(function(t){var e=V("wks"),n=h.Symbol,o="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=o&&n[t]||(o?n:Z)("Symbol."+t))}).store=e}),dt=P.f,ft=ht("toStringTag"),pt=function(t,e,n){t&&!H(t=n?t:t.prototype,ft)&&dt(t,ft,{configurable:!0,value:e})},vt={};T(vt,ht("iterator"),function(){return this});var _t,gt=function(t){return Object(u(t))},mt=X("IE_PROTO"),yt=Object.prototype,wt=Object.getPrototypeOf||function(t){return t=gt(t),H(t,mt)?t[mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yt:null},kt=ht("iterator"),bt=!([].keys&&"next"in[].keys()),Et="values",xt=function(){return this},Pt=function(t,e,n,o,r,i,a){var c,s,l;s=e,l=o,(c=n).prototype=ut(vt,{next:S(1,l)}),pt(c,s+" Iterator");var u,h,d,f=function(t){if(!bt&&t in g)return g[t];switch(t){case"keys":case Et:return function(){return new n(this,t)}}return function(){return new n(this,t)}},p=e+" Iterator",v=r==Et,_=!1,g=t.prototype,m=g[kt]||g["@@iterator"]||r&&g[r],y=!bt&&m||f(r),w=r?v?f("entries"):y:void 0,k="Array"==e&&g.entries||m;if(k&&(d=wt(k.call(new t)))!==Object.prototype&&d.next&&pt(d,p,!0),v&&m&&m.name!==Et&&(_=!0,y=function(){return m.call(this)}),a&&(bt||_||!g[kt])&&T(g,kt,y),A[e]=y,A[p]=xt,r)if(u={values:v?y:f(Et),keys:i?y:f("keys"),entries:w},a)for(h in u)h in g||N(g,h,u[h]);else D(D.P+D.F*(bt||_),e,u);return u},St=(_t=!0,function(t,e){var n,o,r=String(u(t)),i=l(e),a=r.length;return i<0||i>=a?_t?"":void 0:(n=r.charCodeAt(i))<55296||n>56319||i+1===a||(o=r.charCodeAt(i+1))<56320||o>57343?_t?r.charAt(i):n:_t?r.slice(i,i+2):o-56320+(n-55296<<10)+65536});Pt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=St(e,n),this._i+=t.length,{value:t,done:!1})});var Tt=function(t,e){return{value:e,done:!!t}};Pt(Array,"Array",function(t,e){this._t=R(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Tt(1)):Tt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");A.Arguments=A.Array;for(var jt=ht("toStringTag"),Ot="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Lt=0;Lt<Ot.length;Lt++){var Dt=Ot[Lt],Nt=h[Dt],Ct=Nt&&Nt.prototype;Ct&&!Ct[jt]&&T(Ct,jt,Dt),A[Dt]=A.Array}var Ht,At,Bt,Mt=ht("toStringTag"),It="Arguments"==M(function(){return arguments}()),Rt=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Mt))?n:It?M(e):"Object"==(o=M(e))&&"function"==typeof e.callee?"Arguments":o},Ft=function(t,e,n,o){try{return o?e(_(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&_(r.call(t)),e}},Gt=ht("iterator"),qt=Array.prototype,Wt=function(t){return void 0!==t&&(A.Array===t||qt[Gt]===t)},zt=ht("iterator"),Yt=d.getIteratorMethod=function(t){if(void 0!=t)return t[zt]||t["@@iterator"]||A[Rt(t)]},Vt=t(function(t){var e={},n={},o=t.exports=function(t,o,r,i,a){var c,s,l,u,h=a?function(){return t}:Yt(t),d=p(r,i,o?2:1),f=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(Wt(h)){for(c=G(t.length);c>f;f++)if((u=o?d(_(s=t[f])[0],s[1]):d(t[f]))===e||u===n)return u}else for(l=h.call(t);!(s=l.next()).done;)if((u=Ft(l,d,s.value,o))===e||u===n)return u};o.BREAK=e,o.RETURN=n}),Ut=ht("species"),Kt=function(t,e){var n,o=_(t).constructor;return void 0===o||void 0==(n=_(o)[Ut])?e:f(n)},Zt=h.process,Jt=h.setImmediate,Xt=h.clearImmediate,$t=h.MessageChannel,Qt=h.Dispatch,te=0,ee={},ne="onreadystatechange",oe=function(){var t=+this;if(ee.hasOwnProperty(t)){var e=ee[t];delete ee[t],e()}},re=function(t){oe.call(t.data)};Jt&&Xt||(Jt=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ee[++te]=function(){!function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Ht(te),te},Xt=function(t){delete ee[t]},"process"==M(Zt)?Ht=function(t){Zt.nextTick(p(oe,t,1))}:Qt&&Qt.now?Ht=function(t){Qt.now(p(oe,t,1))}:$t?(Bt=(At=new $t).port2,At.port1.onmessage=re,Ht=p(Bt.postMessage,Bt,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(Ht=function(t){h.postMessage(t+"","*")},h.addEventListener("message",re,!1)):Ht=ne in k("script")?function(t){it.appendChild(k("script"))[ne]=function(){it.removeChild(this),oe.call(t)}}:function(t){setTimeout(p(oe,t,1),0)});var ie={set:Jt,clear:Xt},ae=ie.set,ce=h.MutationObserver||h.WebKitMutationObserver,se=h.process,le=h.Promise,ue="process"==M(se);var he={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,o){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=o}),this.resolve=f(e),this.reject=f(n)}(t)}},de=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},fe=function(t,e){if(_(t),v(e)&&e.constructor===t)return e;var n=he.f(t);return(0,n.resolve)(e),n.promise},pe=ht("species"),ve=ht("iterator"),_e=!1;try{[7][ve]().return=function(){_e=!0}}catch(t){}var ge,me,ye,we,ke,be,Ee=function(t,e){if(!e&&!_e)return!1;var n=!1;try{var o=[7],r=o[ve]();r.next=function(){return{done:n=!0}},o[ve]=function(){return r},t(o)}catch(t){}return n},xe=ie.set,Pe=function(){var t,e,n,o=function(){var o,r;for(ue&&(o=se.domain)&&o.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,o&&o.enter()};if(ue)n=function(){se.nextTick(o)};else if(!ce||h.navigator&&h.navigator.standalone)if(le&&le.resolve){var r=le.resolve();n=function(){r.then(o)}}else n=function(){ae.call(h,o)};else{var i=!0,a=document.createTextNode("");new ce(o).observe(a,{characterData:!0}),n=function(){a.data=i=!i}}return function(o){var r={fn:o,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}(),Se="Promise",Te=h.TypeError,je=h.process,Oe=h[Se],Le="process"==Rt(je),De=function(){},Ne=me=he.f,Ce=!!function(){try{var t=Oe.resolve(1),e=(t.constructor={})[ht("species")]=function(t){t(De,De)};return(Le||"function"==typeof PromiseRejectionEvent)&&t.then(De)instanceof e}catch(t){}}(),He=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},Ae=function(t,e){if(!t._n){t._n=!0;var n=t._c;Pe(function(){for(var o=t._v,r=1==t._s,i=0,a=function(e){var n,i,a=r?e.ok:e.fail,c=e.resolve,s=e.reject,l=e.domain;try{a?(r||(2==t._h&&Ie(t),t._h=1),!0===a?n=o:(l&&l.enter(),n=a(o),l&&l.exit()),n===e.promise?s(Te("Promise-chain cycle")):(i=He(n))?i.call(n,c,s):c(n)):s(o)}catch(t){s(t)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&Be(t)})}},Be=function(t){xe.call(h,function(){var e,n,o,r=t._v,i=Me(t);if(i&&(e=de(function(){Le?je.emit("unhandledRejection",r,t):(n=h.onunhandledrejection)?n({promise:t,reason:r}):(o=h.console)&&o.error&&o.error("Unhandled promise rejection",r)}),t._h=Le||Me(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},Me=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ie=function(t){xe.call(h,function(){var e;Le?je.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},Re=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ae(e,!0))},Fe=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Te("Promise can't be resolved itself");(e=He(t))?Pe(function(){var o={_w:n,_d:!1};try{e.call(t,p(Fe,o,1),p(Re,o,1))}catch(t){Re.call(o,t)}}):(n._v=t,n._s=1,Ae(n,!1))}catch(t){Re.call({_w:n,_d:!1},t)}}};Ce||(Oe=function(t){!function(t,e,n,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(n+": incorrect invocation!")}(this,Oe,Se,"_h"),f(t),ge.call(this);try{t(p(Fe,this,1),p(Re,this,1))}catch(t){Re.call(this,t)}},(ge=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:T(t,o,e[o]);return t}(Oe.prototype,{then:function(t,e){var n=Ne(Kt(this,Oe));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Le?je.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ae(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),ye=function(){var t=new ge;this.promise=t,this.resolve=p(Fe,t,1),this.reject=p(Re,t,1)},he.f=Ne=function(t){return t===Oe||t===we?new ye(t):me(t)}),D(D.G+D.W+D.F*!Ce,{Promise:Oe}),pt(Oe,Se),be="function"==typeof d[ke=Se]?d[ke]:h[ke],m&&be&&!be[pe]&&P.f(be,pe,{configurable:!0,get:function(){return this}}),we=d[Se],D(D.S+D.F*!Ce,Se,{reject:function(t){var e=Ne(this);return(0,e.reject)(t),e.promise}}),D(D.S+!0*D.F,Se,{resolve:function(t){return fe(this===we?Oe:this,t)}}),D(D.S+D.F*!(Ce&&Ee(function(t){Oe.all(t).catch(De)})),Se,{all:function(t){var e=this,n=Ne(e),o=n.resolve,r=n.reject,i=de(function(){var n=[],i=0,a=1;Vt(t,!1,function(t){var c=i++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[c]=t,--a||o(n))},r)}),--a||o(n)});return i.e&&r(i.v),n.promise},race:function(t){var e=this,n=Ne(e),o=n.reject,r=de(function(){Vt(t,!1,function(t){e.resolve(t).then(n.resolve,o)})});return r.e&&o(r.v),n.promise}}),D(D.P+D.R,"Promise",{finally:function(t){var e=Kt(this,d.Promise||h.Promise),n="function"==typeof t;return this.then(n?function(n){return fe(e,t()).then(function(){return n})}:t,n?function(n){return fe(e,t()).then(function(){throw n})}:t)}}),D(D.S,"Promise",{try:function(t){var e=he.f(this),n=de(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Ge=d.Promise;var qe=function(t){return function(){var e=this,n=arguments;return new Ge(function(o,r){var i=t.apply(e,n);function a(t,e){try{var n=i[t](e),a=n.value}catch(t){return void r(t)}n.done?o(a):Ge.resolve(a).then(c,s)}function c(t){a("next",t)}function s(t){a("throw",t)}c()})}},We=function(t,e,n){e in t?P.f(t,e,S(0,n)):t[e]=n};D(D.S+D.F*!Ee(function(t){}),"Array",{from:function(t){var e,n,o,r,i=gt(t),a="function"==typeof this?this:Array,c=arguments.length,s=c>1?arguments[1]:void 0,l=void 0!==s,u=0,h=Yt(i);if(l&&(s=p(s,c>2?arguments[2]:void 0,2)),void 0==h||a==Array&&Wt(h))for(n=new a(e=G(i.length));e>u;u++)We(n,u,l?s(i[u],u):i[u]);else for(r=h.call(i),n=new a;!(o=r.next()).done;u++)We(n,u,l?Ft(r,s,[o.value,u],!0):o.value);return n.length=u,n}});var ze=d.Array.from;var Ye=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}return ze(t)};var Ve=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};D(D.S+D.F*!m,"Object",{defineProperty:P.f});var Ue=d.Object,Ke=function(t,e,n){return Ue.defineProperty(t,e,n)};function Ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Ke(t,o.key,o)}}var Je=function(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t},Xe=function(t){var e=new RegExp("[?&]".concat(t,"=([^&]*)")).exec(window.location.search);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},$e={post:function(t,e){return this.request("POST",t,e)},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.request("GET",t,e)},request:function(t,e,n){return new Ge(function(o,r){var i=new XMLHttpRequest;i.open(t,e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.withCredentials=!0,i.onload=function(){4===i.readyState&&200===i.status&&""!==i.response?o(JSON.parse(i.response)):r(i)},i.onerror=function(){r(i)},i.send(n)})}},Qe=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getFullYear(),o="0".concat(t.getMonth()+1).slice(-2),r="0".concat(t.getDate()).slice(-2);return e?"".concat(n," 年 ").concat(o," 月 ").concat(r," 日"):"".concat(n,"-").concat(o,"-").concat(r)},tn=function(t){return t.replace(/ /g,"_")},en=function(t){var e=document.createElement("script");e.text=t.innerHTML;for(var n=t.attributes.length-1;n>=0;n--)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e},nn=function(){if(document.body.dataset.hasOwnProperty("adsenseState"))return"block"===document.body.dataset.adsenseState.toLocaleLowerCase()},on=function(t,e){var n=(d.Object||{})[t]||Object[t],o={};o[t]=e(n),D(D.S+D.F*g(function(){n(1)}),"Object",o)};on("getPrototypeOf",function(){return function(t){return wt(gt(t))}});var rn=d.Object.getPrototypeOf,an={f:ht},cn=an.f("iterator"),sn=t(function(t){var e=Z("meta"),n=P.f,o=0,r=Object.isExtensible||function(){return!0},i=!g(function(){return r(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++o,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!H(t,e)){if(!r(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!H(t,e)){if(!r(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&r(t)&&!H(t,e)&&a(t),t}}}),ln=(sn.KEY,sn.NEED,sn.fastKey,sn.getWeak,sn.onFreeze,P.f),un=function(t){var e=d.Symbol||(d.Symbol={});"_"==t.charAt(0)||t in e||ln(e,t,{value:an.f(t)})},hn={f:Object.getOwnPropertySymbols},dn={f:{}.propertyIsEnumerable},fn=Array.isArray||function(t){return"Array"==M(t)},pn=et.concat("length","prototype"),vn={f:Object.getOwnPropertyNames||function(t){return tt(t,pn)}},_n=vn.f,gn={}.toString,mn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],yn={f:function(t){return mn&&"[object Window]"==gn.call(t)?function(t){try{return _n(t)}catch(t){return mn.slice()}}(t):_n(R(t))}},wn=Object.getOwnPropertyDescriptor,kn={f:m?wn:function(t,e){if(t=R(t),e=E(e,!0),b)try{return wn(t,e)}catch(t){}if(H(t,e))return S(!dn.f.call(t,e),t[e])}},bn=sn.KEY,En=kn.f,xn=P.f,Pn=yn.f,Sn=h.Symbol,Tn=h.JSON,jn=Tn&&Tn.stringify,On="prototype",Ln=ht("_hidden"),Dn=ht("toPrimitive"),Nn={}.propertyIsEnumerable,Cn=V("symbol-registry"),Hn=V("symbols"),An=V("op-symbols"),Bn=Object[On],Mn="function"==typeof Sn,In=h.QObject,Rn=!In||!In[On]||!In[On].findChild,Fn=m&&g(function(){return 7!=ut(xn({},"a",{get:function(){return xn(this,"a",{value:7}).a}})).a})?function(t,e,n){var o=En(Bn,e);o&&delete Bn[e],xn(t,e,n),o&&t!==Bn&&xn(Bn,e,o)}:xn,Gn=function(t){var e=Hn[t]=ut(Sn[On]);return e._k=t,e},qn=Mn&&"symbol"==typeof Sn.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Sn},Wn=function(t,e,n){return t===Bn&&Wn(An,e,n),_(t),e=E(e,!0),_(n),H(Hn,e)?(n.enumerable?(H(t,Ln)&&t[Ln][e]&&(t[Ln][e]=!1),n=ut(n,{enumerable:S(0,!1)})):(H(t,Ln)||xn(t,Ln,S(1,{})),t[Ln][e]=!0),Fn(t,e,n)):xn(t,e,n)},zn=function(t,e){_(t);for(var n,o=function(t){var e=nt(t),n=hn.f;if(n)for(var o,r=n(t),i=dn.f,a=0;r.length>a;)i.call(t,o=r[a++])&&e.push(o);return e}(e=R(e)),r=0,i=o.length;i>r;)Wn(t,n=o[r++],e[n]);return t},Yn=function(t){var e=Nn.call(this,t=E(t,!0));return!(this===Bn&&H(Hn,t)&&!H(An,t))&&(!(e||!H(this,t)||!H(Hn,t)||H(this,Ln)&&this[Ln][t])||e)},Vn=function(t,e){if(t=R(t),e=E(e,!0),t!==Bn||!H(Hn,e)||H(An,e)){var n=En(t,e);return!n||!H(Hn,e)||H(t,Ln)&&t[Ln][e]||(n.enumerable=!0),n}},Un=function(t){for(var e,n=Pn(R(t)),o=[],r=0;n.length>r;)H(Hn,e=n[r++])||e==Ln||e==bn||o.push(e);return o},Kn=function(t){for(var e,n=t===Bn,o=Pn(n?An:R(t)),r=[],i=0;o.length>i;)!H(Hn,e=o[i++])||n&&!H(Bn,e)||r.push(Hn[e]);return r};Mn||(N((Sn=function(){if(this instanceof Sn)throw TypeError("Symbol is not a constructor!");var t=Z(arguments.length>0?arguments[0]:void 0),e=function(n){this===Bn&&e.call(An,n),H(this,Ln)&&H(this[Ln],t)&&(this[Ln][t]=!1),Fn(this,t,S(1,n))};return m&&Rn&&Fn(Bn,t,{configurable:!0,set:e}),Gn(t)})[On],"toString",function(){return this._k}),kn.f=Vn,P.f=Wn,vn.f=yn.f=Un,dn.f=Yn,hn.f=Kn,an.f=function(t){return Gn(ht(t))}),D(D.G+D.W+D.F*!Mn,{Symbol:Sn});for(var Zn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Jn=0;Zn.length>Jn;)ht(Zn[Jn++]);for(var Xn=nt(ht.store),$n=0;Xn.length>$n;)un(Xn[$n++]);D(D.S+D.F*!Mn,"Symbol",{for:function(t){return H(Cn,t+="")?Cn[t]:Cn[t]=Sn(t)},keyFor:function(t){if(!qn(t))throw TypeError(t+" is not a symbol!");for(var e in Cn)if(Cn[e]===t)return e},useSetter:function(){Rn=!0},useSimple:function(){Rn=!1}}),D(D.S+D.F*!Mn,"Object",{create:function(t,e){return void 0===e?ut(t):zn(ut(t),e)},defineProperty:Wn,defineProperties:zn,getOwnPropertyDescriptor:Vn,getOwnPropertyNames:Un,getOwnPropertySymbols:Kn}),Tn&&D(D.S+D.F*(!Mn||g(function(){var t=Sn();return"[null]"!=jn([t])||"{}"!=jn({a:t})||"{}"!=jn(Object(t))})),"JSON",{stringify:function(t){for(var e,n,o=[t],r=1;arguments.length>r;)o.push(arguments[r++]);if(n=e=o[1],(v(e)||void 0!==t)&&!qn(t))return fn(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!qn(e))return e}),o[1]=e,jn.apply(Tn,o)}}),Sn[On][Dn]||T(Sn[On],Dn,Sn[On].valueOf),pt(Sn,"Symbol"),pt(Math,"Math",!0),pt(h.JSON,"JSON",!0),un("asyncIterator"),un("observable");var Qn=d.Symbol,to=t(function(t){function e(t){return(e="function"==typeof Qn&&"symbol"==typeof cn?function(t){return typeof t}:function(t){return t&&"function"==typeof Qn&&t.constructor===Qn&&t!==Qn.prototype?"symbol":typeof t})(t)}function n(o){return"function"==typeof Qn&&"symbol"===e(cn)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof Qn&&t.constructor===Qn&&t!==Qn.prototype?"symbol":e(t)},n(o)}t.exports=n});var eo=function(t,e){if(e&&("object"===to(e)||"function"==typeof e))return e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},no=kn.f;on("getOwnPropertyDescriptor",function(){return function(t,e){return no(R(t),e)}});var oo=d.Object,ro=function(t,e){return oo.getOwnPropertyDescriptor(t,e)};var io=function t(e,n,o){null===e&&(e=Function.prototype);var r=ro(e,n);if(void 0===r){var i=rn(e);return null===i?void 0:t(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},ao=function(t,e){if(_(t),!v(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},co={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=p(Function.call,kn.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,o){return ao(t,o),e?t.__proto__=o:n(t,o),t}}({},!1):void 0),check:ao};D(D.S,"Object",{setPrototypeOf:co.set});var so=d.Object.setPrototypeOf;D(D.S,"Object",{create:ut});var lo=d.Object,uo=function(t,e){return lo.create(t,e)};var ho=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=uo(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(so?so(t,e):t.__proto__=e)},fo="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",po="["+fo+"]",vo=RegExp("^"+po+po+"*"),_o=RegExp(po+po+"*$"),go=function(t,e,n){var o={},r=g(function(){return!!fo[t]()||"​"!="​"[t]()}),i=o[t]=r?e(mo):fo[t];n&&(o[n]=i),D(D.P+D.F*r,"String",o)},mo=go.trim=function(t,e){return t=String(u(t)),1&e&&(t=t.replace(vo,"")),2&e&&(t=t.replace(_o,"")),t},yo=go,wo=h.parseInt,ko=yo.trim,bo=/^[-+]?0[xX]/,Eo=8!==wo(fo+"08")||22!==wo(fo+"0x16")?function(t,e){var n=ko(String(t),3);return wo(n,e>>>0||(bo.test(n)?16:10))}:wo;D(D.S+D.F*(Number.parseInt!=Eo),"Number",{parseInt:Eo});var xo=parseInt,Po=function(){function t(e){Ve(this,t),this.initProperties(e)}return Je(t,[{key:"initProperties",value:function(t){this.project_id=t.project_id,this.project_name=t.project_name,this.platform_name=t.platform_name,this.product_id=t.product_id,this.platform_data=t.platform_data||{},this.widget_type=t.widget_type,this.widget_content=t.widget_content,this.isPreview=t.isPreview,this.octopusTags=t.octopusTags,this.articleTitle=t.articleTitle,this.pv_link=t.pv_link,this.pv_load_link=t.pv_load_link,this.label=t.label||"noLabel",this.click_link=t.click_link,this.zone3_type=t.zone3_type,this.ga=t.widget_content.ga,this.content_type=t.content_type,this.delayTime=1e3,this.supportsPassive=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}()}},{key:"initGoogleAnalytics",value:function(){var t,e,n,o,r;t=window,e=document,n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,o=e.createElement("script"),r=e.getElementsByTagName("script")[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r),ga("create",this.widget_content.ga,"auto",{name:this.gaName}),ga("".concat(this.gaName,".set"),"forceSSL",!0),ga("".concat(this.gaName,".send"),"pageview")}},{key:"recordPaEvent",value:function(t){var e=window._piq||window.top._piq;e.push(["trackEvent","octopusProject",t,this.project_id,xo(this.project_id,10)]),e.push(["trackEvent","octopusSupplier",t,this.platform_name,xo(this.project_id,10)]),e.push(["trackEvent","octopusWidget",t,this.widget_type,xo(this.project_id,10)]),e.push(["trackEvent","octopusProductId",t,this.product_id,xo(this.project_id,10)]);for(var n=this.octopusTags.length,o=0;o<n;o++)e.push(["trackEvent","octopusTag",t,this.octopusTags[o],xo(this.project_id,10)])}},{key:"sendTrackEvent",value:function(t){(new Image).src=t}}]),t}(),So=function(t){var e,n,o,r=t.description||"",i=t.img_link||"",a=t.title,c=(e=t.link,n=e.includes("?")?"&":"?",o=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*o));return e}(40),"".concat(e).concat(n,"click_id=").concat(o)),s=t.price||"",l=t.original_price||"",u=t.button_name,h=t.html||"",d="";r&&(d='<a href="'.concat(c,'" target="_blank" rel="nofollow noopener"><span class="related__subtitle">').concat(r,"</span></a>"));var f="";i&&(f='<a href="'.concat(c,'" target="_blank" rel="nofollow noopener"><img class="related__img" src="').concat(i,'"></a>'));var p="";return h&&(p='<a href="'.concat(c,'" target="_blank" rel="nofollow noopener">').concat(h,"</a>")),'\n            <div class="related" data-title="'.concat(a,'" data-link="').concat(c,'" data-price="').concat(s,'" data-original-price="').concat(l,'" data-description="').concat(r,'" data-img-link="').concat(i,'" data-button-name="').concat(u,'">\n                <a href="').concat(c,'" target="_blank" rel="nofollow noopener"><h3 class="related__title">').concat(a,"</h3></a>\n                ").concat(d,"\n                ").concat(f,"\n                ").concat(p,'\n                <a class="related__reserve" href="').concat(c,'" target="_blank" rel="nofollow noopener">').concat(u,"</a>\n            </div>")};var To=function(t){function e(){return Ve(this,e),eo(this,(e.__proto__||rn(e)).apply(this,arguments))}return ho(e,Po),Je(e,[{key:"initProperties",value:function(t){io(e.prototype.__proto__||rn(e.prototype),"initProperties",this).call(this,t),this.gaName="relatedPrdTracker"}},{key:"bindEvent",value:function(t){var n=this;t.addEventListener("click",function(t){var o,r,i=document.querySelector(".related__content"),a=t.target,c={related__title:"title",related__subtitle:"description",related__img:"image",related__reserve:"button"},s=n.click_link.match(/\?/)?"&":"?",l="other";n.isDescendant(i,a)&&(l="description");for(var u in c)if(0<=a.className.indexOf(u)){l=c[u];break}n.widget_content.link?(n.recordGaEvent("click",!0),n.recordPaEvent("click_"+l),io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,"".concat(n.click_link).concat(s,"position=").concat(l)),"related"===a.className&&(o="".concat(n.widget_content.link),(r=document.createElement("a")).href=o,r.target="_blank",r.rel="noopener",r.click())):t.preventDefault()});var o=!1,r=window.self!==window.top?window.top.document.getElementById("in-read-rp"):t;window.top.addEventListener("scroll",function t(){o||window.top.requestAnimationFrame(function(){r.offsetTop<window.top.pageYOffset+window.top.innerHeight&&r.offsetTop+r.offsetHeight>window.top.pageYOffset?(io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,n.pv_link),n.recordGaEvent("scroll_into_view",!0),n.recordPaEvent("scroll_into_view"),window.top.removeEventListener("scroll",t)):o=!1}),o=!0})}},{key:"isDescendant",value:function(t,e){for(var n=e.parentNode;null!=n;){if(n==t)return!0;n=n.parentNode}return!1}},{key:"trace",value:function(){var t=this;io(e.prototype.__proto__||rn(e.prototype),"initGoogleAnalytics",this).call(this),io(e.prototype.__proto__||rn(e.prototype),"recordPaEvent",this).call(this,"imps"),setTimeout(function(){t.recordGaEvent("load",!1),t.recordPaEvent("load")},this.delayTime)}},{key:"recordGaEvent",value:function(t,e){ga("".concat(this.gaName,".send"),"event","".concat(this.project_id,"_RP_").concat(this.project_name),t,{nonInteraction:!e})}},{key:"recordPaEvent",value:function(t){window.top._piq.push(["trackEvent","".concat(this.project_id,"_RP_").concat(this.project_name),t,this.label])}},{key:"compileHtml",value:function(){return So(this.widget_content)}}]),e}(),jo=Object.assign,Oo=!jo||g(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=jo({},t)[n]||Object.keys(jo({},e)).join("")!=o})?function(t,e){for(var n=gt(t),o=arguments.length,r=1,i=hn.f,a=dn.f;o>r;)for(var c,s=I(arguments[r++]),l=i?nt(s).concat(i(s)):nt(s),u=l.length,h=0;u>h;)a.call(s,c=l[h++])&&(n[c]=s[c]);return n}:jo;D(D.S+D.F,"Object",{assign:Oo});var Lo,Do=d.Object.assign,No=function(t){function e(){return Ve(this,e),eo(this,(e.__proto__||rn(e)).apply(this,arguments))}return ho(e,Po),Je(e,[{key:"initProperties",value:function(t){var n=this;io(e.prototype.__proto__||rn(e.prototype),"initProperties",this).call(this,t),this.gaName="hotelcTracker",this.widget_content.ga=t.widget_content&&t.widget_content.ga||"UA-65168598-12",this.platform_data.date={},this.label=t.label,this.firstResult=!0,this.isHotel="hotels_compare"===this.widget_type,this.today=new Date,this.todayStr=this.formateDate(this.today),this.stateNow="loading",this.clickedCheckinDate=!1,this.clickedCheckoutDate=!1,this.changedCheckinDate=!1,this.changedCheckoutDate=!1,this.defaultDate={hotelcCheckin:this.formateDate(new Date(this.today.getTime()+6048e5)),hotelcCheckout:this.formateDate(new Date(this.today.getTime()+6912e5))},this.isHotelRecommendDiy="hotel_recommend_diy"===t.widget_type,this.traceResult={result:function(){n.recordHotelcPaEvent("load")},fail:function(){n.recordHotelcPaEvent("load hotel fail")},nodata:function(){n.recordHotelcPaEvent("load hotel fail")}}}},{key:"compileHtml",value:function(){var t=Do({},this.widget_content,this.platform_data);return this.isHotelRecommendDiy?this.widget_content.html:function(t,e){var n=new Date,o=new Date(n.getTime()+6048e5),r=new Date(n.getTime()+6912e5),i=Qe(n),a=Qe(o),c=Qe(r),s=Qe(o,!0),l=Qe(r,!0),u=e.area_en||"",h=e.area_tw||"",d=e.name_en||"",f=e.name_tw||"",p=e.item_count||"",v=e.title,_=e.area_en||"",g=e.button_name||"",m=e.star_rating||"",y=e.image_url||"",w="";"off"===e.enable_entry_date&&(w='hidden="true"');var k="";return"off"===e.enable_exit_date&&(k='hidden="true"'),{hotels_compare:function(){for(var t="",e=0;e<m;e++)t+='<span class="hotelc__info__star--yellow"></span>';for(var n=m;n<5;n++)t+='<span class="hotelc__info__star--gray"></span>';var o="";return y&&(o="style=\"background-image: url('".concat(y,"')\"")),'<div class="hotelc-box" data-type="hotel" data-place="'.concat(u,'" data-name-en="').concat(d,'" data-name-tw="').concat(f,'">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">\n                <defs>\n                    <g id="icon-arrow--down">\n                        <path d="M1 0l5 6.996m0 0L11 0" stroke-linecap="square" stroke="currentColor" fill="none"/>\n                    </g>\n                    <g id="icon-arrow--right" fill="none" fill-rule="evenodd">\n                        <path d="M-349-58H26V2h-375z"/>\n                        <path d="M0 12l6-6M0 0l6 6" stroke="currentColor" stroke-linecap="square"/>\n                    </g>\n                </defs>\n            </svg>\n            <div class="hotelc__header">').concat(v,'</div>\n            <div class="hotelc__block1">\n                <a id="hotelc-info" href="https://www.hotelscombined.com.tw/Hotel/Search?fileName=').concat(d,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&a_aid=132653&label=hotelinfoSingle" target="_blank" rel="nofollow noopener">\n                    <div class="hotelc__info">\n                        <div>\n                            <div class="hotelc__info__img" ').concat(o,'></div>\n                        </div>\n                        <div>\n                            <div class="hotelc__info__name">').concat(f,'</div>\n                            <div class="hotelc__info__place">').concat(h,"</div>\n                            <div>\n                                ").concat(t,'\n                                <span class="hotelc__info__star__txt">').concat(m,'星級飯店</span>\n                            </div>\n                        </div>\n                    </div>\n                </a>\n                <div class="hotelc__date-btn-container">\n                    <div class="hotelc__date-btn" ').concat(w,'>\n                        <div class="hotelc__date-btn__text">入住日期</div>\n                        <div class="hotelc__date-btn__date">\n                            <span>').concat(s,'</span>\n                            <svg class="icon-arrow--down" viewBox="0 0 12 8">\n                                <use xlink:href="#icon-arrow--down"></use>\n                            </svg>\n                        </div>\n                    </div>\n                    <div class="hotelc__date-btn" ').concat(k,'>\n                        <div class="hotelc__date-btn__text">退房日期</div>\n                        <div class="hotelc__date-btn__date">\n                            <span>').concat(l,'</span>\n                            <svg class="icon-arrow--down" viewBox="0 0 12 8">\n                                <use xlink:href="#icon-arrow--down"></use>\n                            </svg>\n                        </div>\n                    </div>\n                    <div class="hotelc__date-inputs">\n                        <input class="hotelc__date-input" type="date" value="').concat(a,'" min="').concat(i,'">\n                        <input class="hotelc__date-input" type="date" value="').concat(c,'" min="').concat(c,'">\n                    </div>\n                </div>\n            </div>\n            \x3c!-- 資料讀取中 --\x3e\n            <div class="hotelc__loading">\n                <div class="hotelc__loading-icon">資料讀取中</div>\n                <a class="hotelc__loading-link hotelc-links" id="hotelc-link--loading-continue" href="https://www.hotelscombined.com.tw/Hotel/Search?fileName=').concat(d,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&a_aid=132653&label=loadingSingle" target="_blank" rel="nofollow noopener">等不及了嗎，直接前往查看更多</a>\n            </div>\n            <div class="hotelc__result">\n                <ul class="hotelc__result__list single--b"></ul>\n                <div class="hotelc__notes hotelc__notes--last">\n                    <a class="hotelc-links" id="hotelc-link--more" href="https://www.hotelscombined.com.tw/Hotels/Search?destination=place:').concat(u,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&sortField=consumerRating&a_aid=132653&label=moreSingle&sort=MinRate-asc" target="_blank" rel="nofollow noopener">看更多').concat(h,'飯店</a><br>\n                    <a class="hotelc-powerby" href="https://www.hotelscombined.com.tw?a_aid=132653&label=powerbySingle" target="_blank" rel="nofollow noopener">\n                        <img src="https://front.pixfs.net/coblog/img/logo--hotelc.png" class="hotelc-powerby__img" alt="資料提供：HotelsCombined">\n                    </a>\n                </div>\n            </div>\n            \x3c!-- 資料錯誤 --\x3e\n            <div class="hotelc__nodata">\n                <div class="hotelc__notes">\n                    由於資料過多<br>\n                    請前往 HotelsCombined 看詳細結果\n                </div>\n                <a class="hotelc__btn hotelc__btn--blue hotelc-links" id="hotelc-link--fail-continue" href="https://www.hotelscombined.com.tw/Hotel/Search?fileName=').concat(d,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&a_aid=132653&label=nodataSingle" target="_blank" rel="nofollow noopener">\n                    立即前往\n                    <svg class="icon-arrow--right" viewBox="0 0 8 12">\n                        <use xlink:href="#icon-arrow--right"></use>\n                    </svg>\n                </a>\n            </div>\n        </div>')}(),hotels_recommend:'<div class="hotelc-box" data-type="place" data-place="'.concat(u,'" data-name-en="').concat(d,'" data-name-tw="').concat(f,'" data-item-count="').concat(p,'">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">\n                <defs>\n                    <g id="icon-arrow--down">\n                        <path d="M1 0l5 6.996m0 0L11 0" stroke-linecap="square" stroke="currentColor" fill="none"/>\n                    </g>\n                    <g id="icon-arrow--right" fill="none" fill-rule="evenodd">\n                        <path d="M-349-58H26V2h-375z"/>\n                        <path d="M0 12l6-6M0 0l6 6" stroke="currentColor" stroke-linecap="square"/>\n                    </g>\n                </defs>\n            </svg>\n            <div class="hotelc__header">').concat(v,'</div>\n            <div class="hotelc__block1">\n                <div class="hotelc__date-btn-container">\n                    <div class="hotelc__date-btn" ').concat(w,'>\n                        <div class="hotelc__date-btn__text">入住日期</div>\n                        <div class="hotelc__date-btn__date">\n                            <span>').concat(s,'</span>\n                            <svg class="icon-arrow--down" viewBox="0 0 12 8">\n                                <use xlink:href="#icon-arrow--down"></use>\n                            </svg>\n                        </div>\n                    </div>\n                    <div class="hotelc__date-btn" ').concat(k,'>\n                        <div class="hotelc__date-btn__text">退房日期</div>\n                        <div class="hotelc__date-btn__date">\n                            <span>').concat(l,'</span>\n                            <svg class="icon-arrow--down" viewBox="0 0 12 8">\n                                <use xlink:href="#icon-arrow--down"></use>\n                            </svg>\n                        </div>\n                    </div>\n                    <div class="hotelc__date-inputs">\n                        <input class="hotelc__date-input" type="date" value="').concat(a,'" min="').concat(i,'">\n                        <input class="hotelc__date-input" type="date" value="').concat(c,'" min="').concat(c,'">\n                    </div>\n                </div>\n            </div>\n            \x3c!-- 資料讀取中 --\x3e\n            <div class="hotelc__loading">\n                <div class="hotelc__loading-icon">資料讀取中</div>\n                <a class="hotelc__loading-link hotelc-links" id="hotelc-link--loading-continue" href="https://www.hotelscombined.com.tw/Hotels/Search?destination=place:').concat(_,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&sortField=consumerRating&a_aid=132653&label=loadingArea" target="_blank" rel="nofollow noopener">等不及了嗎，直接前往查看更多</a>\n            </div>\n            <div class="hotelc__result">\n                <ul class="hotelc__result__list multi--b"></ul>\n                <a class="hotelc__btn hotelc__btn--green hotelc-links" id="hotelc-link--more" href="https://www.hotelscombined.com.tw/Hotels/Search?destination=place:').concat(_,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&sortField=consumerRating&a_aid=132653&label=moreArea" target="_blank" rel="nofollow noopener">\n                    ').concat(g,'\n                    <svg class="icon-arrow--right" viewBox="0 0 8 12">\n                        <use xlink:href="#icon-arrow--right"></use>\n                    </svg>\n                </a>\n                <div class="hotelc__notes hotelc__notes--last">\n                    <a class="hotelc-powerby" href="https://www.hotelscombined.com.tw?a_aid=132653&label=powerbyArea" target="_blank" rel="nofollow noopener">\n                        <img src="https://front.pixfs.net/coblog/img/logo--hotelc.png" class="hotelc-powerby__img" alt="資料提供：HotelsCombined">\n                    </a>\n                </div>\n            </div>\n            \x3c!-- 資料錯誤 --\x3e\n            <div class="hotelc__nodata">\n                <div class="hotelc__notes">\n                    由於資料過多<br>\n                    請前往 HotelsCombined 看詳細結果\n                </div>\n                <a class="hotelc__btn hotelc__btn--blue hotelc-links" id="hotelc-link--fail-continue" href="https://www.hotelscombined.com.tw/Hotels/Search?destination=place:').concat(_,"&checkin=").concat(a,"&checkout=").concat(c,'&rooms=1&adults_1=2&languageCode=TW&sortField=consumerRating&a_aid=132653&label=nodataArea" target="_blank" rel="nofollow noopener">\n                    立即前往\n                    <svg class="icon-arrow--right" viewBox="0 0 8 12">\n                        <use xlink:href="#icon-arrow--right"></use>\n                    </svg>\n                </a>\n            </div>\n        </div>'),hotels_search:'<div class="hotels-search">\n            <ins class="bookingaff" data-aid="846006" data-target_aid="835804" data-prod="nsb" data-width="265" data-height="360" data-lang="xt" data-currency="TWD">\n            \x3c!-- Anything inside will go away once widget is loaded. --\x3e\n                <a href="https://www.booking.com?aid=835804" target="_blank" rel="nofollow noopener">Booking.com</a>\n            </ins>\n        </div>'}[t]||""}(this.widget_type,t)}},{key:"compileScript",value:function(){var t=document.createElement("script");t.innerHTML='\n            (function(d, sc, u) {\n                var s = d.createElement(sc), p = d.getElementsByTagName(sc)[0]; s.type = \'text/javascript\';\n                s.async = true;\n                s.src = u + \'?v=\' + (+new Date());\n                p.parentNode.insertBefore(s,p);\n            })(document, \'script\', \'https://aff.bstatic.com/static/affiliate_base/js/flexiproduct.js\');\n            dataLayer.push({\n                "c2a" : "hotels",\n                "event" : "hotelc2a-hcsearch-imp",\n                "eventLabel": "BK2"\n            });',document.getElementsByTagName("head")[0].appendChild(t)}},{key:"trace",value:function(){if(this.isHotelRecommendDiy)this.initGoogleAnalytics();else{this.initSets();for(var t=this.hotelcBlock.result.querySelectorAll(".hotelc__table--avg--link"),e=t.length,n=0;n<e;n++){var o=t[n].dataset.label;this.recordHotelLabelPaEvent("imps",o)}}}},{key:"initGoogleAnalytics",value:function(){io(e.prototype.__proto__||rn(e.prototype),"initGoogleAnalytics",this).call(this)}},{key:"initSets",value:function(){this.initGoogleAnalytics(),this.initDomElement(),this.initDate()}},{key:"bindEvent",value:function(t){var n=this;if(this.isHotelRecommendDiy)return this.bindScrollIntoView(t),void this.recordEvent("load_zone2",this.otherEventLabel);this.recordEvent("load_zone2",this.hcEventLabel),t.addEventListener("click",function(t){var o=t.target;if(n.hotelcBlock.result.contains(o)&&!o.classList.contains("hotelc__notes")){var r,i=n.click_link.match(/\?/)?"&":"?";if(n.hotelcBlock.hotels.contains(o)){var a={hotelc__img:"image",hotelc__info__name:"title"},c=n.findAncestor(o,"hotelc__table--avg--link"),s=c&&c.dataset||{},l=s.name,u=s.label&&s.label.charAt(0);for(var h in a)if(0<=o.className.indexOf(h)){r=a[h];break}r&&(io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,"".concat(n.click_link).concat(i,"position=").concat(r,"&extra=").concat(l)),n.recordEvent("click_on_".concat(r),"".concat(n.hcEventLabel,"::").concat(c.href)));var d=new Date(n.inputBtn.true[0].value).getTime(),f=new Date(n.inputBtn.true[1].value).getTime(),p=Math.round(Math.abs((d-f)/864e5));n.changedCheckinDate&&n.recordEvent("check_in_date_days_away_from_today",n.hcEventLabel,p),n.changedCheckoutDate&&n.recordEvent("check_out_date_days_away_from_today",n.hcEventLabel,p),u&&n.recordEvent("click_on_price_compare","".concat(u,"::").concat(n.hcEventLabel,"::").concat(c.href))}switch(o.id){case"hotelc-info":return void n.recordHotelcPaEvent("click_hotel info");case"hotelc-link--more":return n.recordEvent(n.isHotel?"click_on_more_about_this_hotel_link":"click_on_more_recommendations_button","".concat(n.hcEventLabel,"::").concat(o.href)),n.recordHotelcPaEvent("click_button"),void io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,"".concat(n.click_link).concat(i,"position=button"));case"hotelc-link--more-price":return n.recordEvent("click_on_more_recommendations_button","".concat(n.hcEventLabel,"::").concat(o.href)),n.recordHotelcPaEvent("click_button"),void io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,"".concat(n.click_link).concat(i,"position=button"))}if("hotelc-powerby__img"===o.className)return n.recordEvent("click_on_hc_logo",n.hcEventLabel),n.recordHotelcPaEvent("click_description"),void io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,"".concat(n.click_link).concat(i,"position=description"));n.recordHotelcPaEvent("click_"+r),io(e.prototype.__proto__||rn(e.prototype),"recordPaEvent",n).call(n,"click")}}),this.bindInputBtn(),this.bindScrollIntoView(t)}},{key:"bindScrollIntoView",value:function(t){var n=this,o=!1;window.addEventListener("scroll",function r(){o||window.requestAnimationFrame(function(){t.offsetTop<window.pageYOffset+window.screen.height&&t.offsetTop+t.offsetHeight>window.pageYOffset?(io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,n.pv_link),io(e.prototype.__proto__||rn(e.prototype),"recordPaEvent",n).call(n,"imps"),n.recordHotelcPaEvent("imps"),n.recordEvent("scroll_into_view",n.isHotelRecommendDiy?n.otherEventLabel:n.hcEventLabel),window.removeEventListener("scroll",r)):o=!1}),o=!0},!!this.supportsPassive&&{passive:!0})}},{key:"findAncestor",value:function(t,e){return t.classList.contains(e)?t:t.classList.contains("octopus")?t:this.findAncestor(t.parentElement,e)}},{key:"initDomElement",value:function(){this.inputBtn={fake:document.getElementsByClassName("hotelc__date-btn__date"),true:document.getElementsByClassName("hotelc__date-input")},this.links=document.getElementsByClassName("hotelc-links"),this.hotelcBlock={info:document.getElementsByClassName("hotelc__info")[0],loading:document.getElementsByClassName("hotelc__loading")[0],result:document.getElementsByClassName("hotelc__result")[0],fail:document.getElementsByClassName("hotelc__nodata")[0],hotels:document.getElementsByClassName("hotelc__result__list")[0]}}},{key:"initDate",value:function(){var t=this,e=function(e){var n=function(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length)return e[1].split(";")[0];return!1}(e);return n&&n>t.defaultDate[e]?n:t.defaultDate[e]};this.changeHotelcDate(e("hotelcCheckin"),e("hotelcCheckout")),this.inputBtn.true[0].value=this.platform_data.date.checkin,this.inputBtn.true[1].value=this.platform_data.date.checkout,this.changeDateZh(0,this.platform_data.date.checkin),this.changeDateZh(1,this.platform_data.date.checkout)}},{key:"getHotelData",value:function(){var t,e,n=this,o={checkin_date:this.platform_data.date.checkin,checkout_date:this.platform_data.date.checkout,label:this.label,limit:this.widget_content.item_count||3};this.isHotel?(o.type="hotel",o.hotel_identity=tn(this.platform_data.name_en)):(o.type="place",o.hotel_identity=tn(this.platform_data.area_en)),(t="https://pixoctopus.pixnet.net/api/hotelscombined",e=o,new Ge(function(n,o){var r=new XMLHttpRequest,i="".concat(t,"?type=").concat(e.type,"&checkin_date=").concat(e.checkin_date,"&checkout_date=").concat(e.checkout_date,"&label=").concat(e.label,"&hotel_identity=").concat(e.hotel_identity,"&limit=").concat(e.limit);r.open("GET",i,!0),r.onload=function(){200===r.status?n(r.response):o(r)},r.onerror=function(){o(r)},r.send()})).then(function(t){var e=JSON.parse(t);n.isHotel&&e.order_info?n.showResult(e.order_info):e.hotels&&Array.isArray(e.hotels)?n.showResult(e.hotels):n.changeState("nodata")},function(){n.changeState("fail")})}},{key:"changeState",value:function(t){var e=this;"loading"!==t&&this.traceResult[t]();"nodata"===t&&(t="fail"),e.hotelcBlock[e.stateNow].style.display="none",e.stateNow=t,e.hotelcBlock[t].style.display="block"}},{key:"showResult",value:function(t){var e="",n=t.length;if(this.isHotel){for(var o=0;o<n;o++){var r='<li class="hotelc__table--highline hotelc__table--highline--red">\n                        <a class="hotelc__table--avg hotelc__table--avg--link hotelc__table--avg--inside-border hotelc__table--avg--60" href="'.concat(t[o].book_url,'" target="_blank" data-label="1-').concat(s(t[o].logo),"-").concat(this.platform_data.name_tw,'" data-name="').concat(t[o].name,'">\n                            <div>\n                                <div class="hotelc__logo" style="background-image: url(\'').concat(t[o].logo,'\')"></div>\n                            </div>\n                            <div>\n                                <div class="hotelc__price hotelc__price--red">NT$<span>').concat(c(t[o].price),'</span></div>\n                            </div>\n                        </a>\n                    </li>\n                    <a class="hotelc__btn hotelc__btn--red" id="hotelc-link--more-price" href="').concat(t[o].book_url,'" target="_blank">').concat(this.widget_content.button_name,'\n                        <svg class="icon-arrow--right" viewBox="0 0 8 12"><use xlink:href="#icon-arrow--right"></use></svg>\n                    </a>');0<o&&(r='<li class="border-top-1">\n                            <a class="hotelc__table--avg hotelc__table--avg--link hotelc__table--avg--inside-border hotelc__table--avg--60" href="'.concat(t[o].book_url,'" target="_blank" data-label="').concat(o+1,"-").concat(s(t[o].logo),"-").concat(this.platform_data.name_tw,'">\n                                <div>\n                                    <div class="hotelc__logo" style="background-image: url(\'').concat(t[o].logo,'\')"></div>\n                                </div>\n                                <div>\n                                    <div class="hotelc__price">NT$<span>').concat(c(t[o].price),"</span></div>\n                                </div>\n                            </a>\n                        </li>")),"https://cdn.datahc.com/Images/providers/logos/"===t[o].logo&&(r=r.replace(" style=\"background-image: url('".concat(t[o].logo,"')\""),"")),e+=r}this.hotelcBlock.result.querySelectorAll(".hotelc__result__list")[0].innerHTML=e}else{for(var i=0;i<n;i++){var a='<li class="hotelc__result--multi border-top-1">\n                        <a class="hotelc__table--avg--link" href="'.concat(t[i].book_url,'" target="_blank" data-label="').concat(i+1,"-").concat(s(t[i].logo),"-").concat(t[i].name,'" data-name="').concat(t[i].name,'">\n                            <div class="hotelc__table--avg hotelc__table--avg--scale">\n                                <div>\n                                    <div class="full-width">\n                                        <img src="').concat(t[i].hotel_img,'" class="hotelc__img">\n                                    </div>\n                                </div>\n                                <div>\n                                    <div class="full-width wrap-normal">\n                                        <span class="hotelc__info__rating">網友評分：').concat(t[i].guest_rating,'</span>\n                                        <br>\n                                        <span class="hotelc__info__name">').concat(t[i].name,'</span>\n                                        <br>\n                                        <span class="hotelc__info__place">').concat(t[i].place_name,'</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="hotelc__table--avg hotelc__table--avg--inside-border hotelc__table--avg--60">\n                                <div>\n                                    <div class="hotelc__logo" style="background-image: url(\'').concat(t[i].logo,'\')"></div>\n                                </div>\n                                <div>\n                                    <div class="text-right nowrap">\n                                        <div class="hotelc__price hotelc__price--green">NT$<span>').concat(c(t[i].price),'</span>\n                                            <svg class="icon-arrow--right" viewBox="0 0 8 12">\n                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-arrow--right"></use>\n                                            </svg>\n                                        </div>\n                                        <div class="hotelc__compare">比較 ').concat(t[i].providers_num," 個網站最低價</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    </li>");t[i].hotel_img||(a=a.replace('<img src="'.concat(t[i].hotel_img,'">'),"")),"https://cdn.datahc.com/Images/providers/logos/"===t[i].logo&&(a=a.replace(" style=\"background-image: url('".concat(t[i].logo,"')\""),"")),e+=a}this.hotelcBlock.result.querySelectorAll("ul")[0].innerHTML=e}function c(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function s(t){var e=t.split("/");return e=e[e.length-1].split("-")[0].split(".")[0]}this.changeState("result")}},{key:"bindInputBtn",value:function(){var t=this,e=function(){var e=t.inputBtn.true[0].value,n=t.inputBtn.true[1].value;t.todayStr<=e&&e<n&&(t.changeHotelcDate(e,n),t.changeState("loading"),setTimeout(function(){t.getHotelData()},500))};e();var n=function n(){var r=t.inputBtn.true[1].value,i=!isNaN(new Date(r).getTime()),a=t.inputBtn.true[1].getAttribute("min"),c=new Date(new Date(r).getTime()-864e5),s=t.formateDate(c);t.changedCheckoutDate=!0,i?(t.changeDateZh(1,t.inputBtn.true[1].value),t.inputBtn.true[0].value>=r?(t.inputBtn.true[0].value=s,o()):e()):(t.inputBtn.true[1].value=a,t.changeDateZh(1,t.today),n())},o=function o(){var r=t.inputBtn.true[0].value,i=!isNaN(new Date(r).getTime()),a=new Date(new Date(r).getTime()+864e5),c=t.formateDate(a);t.changedCheckinDate=!0,!i||t.todayStr>r?(t.inputBtn.true[0].value=t.todayStr,t.changeDateZh(0,t.today),o()):(t.changeDateZh(0,r),t.inputBtn.true[1].setAttribute("min",c),t.inputBtn.true[1].value<=r?(t.inputBtn.true[1].value=c,n()):e())};this.inputBtn.fake[0].addEventListener("click",function(){t.inputBtn.true[0].click(),t.inputBtn.true[0].focus(),t.clickedCheckinDate||(t.clickedCheckinDate=!0,t.recordEvent("click_on_check_in_date",t.hcEventLabel)),t.recordHotelcPaEvent("click_check in")}),this.inputBtn.fake[1].addEventListener("click",function(){t.inputBtn.true[1].click(),t.inputBtn.true[1].focus(),t.clickedCheckoutDate||(t.clickedCheckoutDate=!0,t.recordEvent("click_on_check_out_date",t.hcEventLabel)),t.recordHotelcPaEvent("click_check out")}),this.inputBtn.true[0].addEventListener("change",o),this.inputBtn.true[1].addEventListener("change",n)}},{key:"changeHotelcDate",value:function(t,e){for(var n=this,o=function(t,e){if(/^(\d{4})-(\d{2})-(\d{2})$/.test(e)&&!isNaN(new Date(e).getTime())){var o=(new Date).setTime(n.today.getTime()+6048e5);document.cookie="".concat(t,"=").concat(e,";domain=.pixnet.net;path=/;expires=").concat(new Date(o).toGMTString())}},r="checkin=".concat(this.platform_data.date.checkin,"&checkout=").concat(this.platform_data.date.checkout),i="checkin=".concat(t,"&checkout=").concat(e),a=this.links.length,c=0;c<a;c++){var s=this.links[c].getAttribute("href").replace(r,i);this.links[c].setAttribute("href",s)}this.platform_data.date.checkin=t,this.platform_data.date.checkout=e,o("hotelcCheckin",t),o("hotelcCheckout",e)}},{key:"changeDateZh",value:function(t,e){var n=new Date(e);this.inputBtn.fake[t].querySelectorAll("span")[0].textContent="".concat(n.getFullYear()," 年 ").concat(n.getMonth()+1," 月 ").concat(n.getDate()," 日")}},{key:"formateDate",value:function(t){var e=t.getFullYear(),n="0".concat(t.getMonth()+1).slice(-2),o="0".concat(t.getDate()).slice(-2);return"".concat(e,"-").concat(n,"-").concat(o)}},{key:"recordEvent",value:function(t,e,n){var o="".concat(this.project_id,"_zone2_").concat(this.project_name);ga("".concat(this.gaName,".send"),"event",o,t,e,n),_piq.push(["trackEvent",o,t,e,n])}},{key:"recordHotelcPaEvent",value:function(t){var e=this.isHotel?"Hotel Compare Prices":"Hotel Recommend";_piq.push(["trackEvent",e,t,this.label])}},{key:"recordHotelLabelPaEvent",value:function(t,e){_piq.push(["trackEvent","octopusHotelLabel",t,"".concat(this.label,":::").concat(e)])}},{key:"hcEventLabel",get:function(){return"".concat(this.platform_data.name_tw,"::").concat(location.href)}},{key:"otherEventLabel",get:function(){return location.href}}]),e}(),Co=function(t){function e(){return Ve(this,e),eo(this,(e.__proto__||rn(e)).apply(this,arguments))}return ho(e,Po),Je(e,[{key:"initProperties",value:function(t){io(e.prototype.__proto__||rn(e.prototype),"initProperties",this).call(this,t),this.gaName="scriptBoxTracker"}},{key:"bindEvent",value:function(t){var n=this,o=!1,r=window.self!==window.top?window.top.document.getElementById("in-read-rp"):t;window.top.addEventListener("scroll",function t(){o||window.top.requestAnimationFrame(function(){r.offsetTop<window.top.pageYOffset+window.top.innerHeight&&r.offsetTop+r.offsetHeight>window.top.pageYOffset?(io(e.prototype.__proto__||rn(e.prototype),"sendTrackEvent",n).call(n,n.pv_link),n.recordGaEvent("scroll_into_view",!0),window.top.removeEventListener("scroll",t)):o=!1}),o=!0})}},{key:"recordGaEvent",value:function(t,e){ga("".concat(this.gaName,".send"),"event","".concat(this.project_id,"_RP_").concat(this.project_name),t,{nonInteraction:!e})}},{key:"trace",value:function(){var t=this;io(e.prototype.__proto__||rn(e.prototype),"initGoogleAnalytics",this).call(this),io(e.prototype.__proto__||rn(e.prototype),"recordPaEvent",this).call(this,"imps"),setTimeout(function(){t.recordGaEvent("load",!1)},this.delayTime)}},{key:"compileHtml",value:function(){return this.widget_content.position_html}}]),e}(),Ho=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ve(this,t),this.categoryId="",this.octopusTags=[],this.articleTitle="",this.widgetParams="",this.fuzzyWidgetParams="",this.articleTitle="",this.octopusDom={},this.projectId=Xe("project_id")||"",this.isPreview=!!this.projectId,this.zone1=[],this.zone2=[],this.zone3=[],this.init(e),this.adNum=Xe("ad_num")||""}var e,n,o;return Je(t,[{key:"init",value:function(t){this.setConfig(t),this.serializeData()}},{key:"setConfig",value:function(t){var e=this;t.map(function(t){var n=t[0],o=t[1];n in e&&"function"!=typeof o&&(e[n]=o)})}},{key:"serializeData",value:function(){this.widgetParams="?category_id=".concat(this.categoryId,"&article_title=").concat(encodeURIComponent(this.articleTitle),"&project_id=").concat(this.projectId),this.octopusTags.length>0&&(this.widgetParams+="&"+this.octopusTags.map(function(t){return"tags[]=".concat(encodeURIComponent(t))}).join("&")),this.setProjectNumbers(),this.setIsLogin(),this.setUrl()}},{key:"setProjectNumbers",value:function(){var t="";ze(this.octopusDom).forEach(function(e){var n=e.dataset.zone;t+="&position_num[Zone".concat(n,"]=").concat(1)}),this.widgetParams+=t}},{key:"setIsLogin",value:function(){this.widgetParams+="&is_login=".concat(window.top.pix&&window.top.pix.member_token?"1":"0")}},{key:"setUrl",value:function(){this.widgetParams+="&url=".concat(encodeURI(location.href))}},{key:"run",value:(o=qe(a.mark(function t(){var e,n;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=this.widgetParams.indexOf("position_num")){t.next=2;break}return t.abrupt("return");case 2:return e="https://pixoctopus.pixnet.net/projects",t.prev=3,t.next=6,$e.get(e+this.widgetParams);case 6:if(!(n=t.sent).error){t.next=11;break}return window.showAnchor=!0,this.handleError("noMatchWidget"),t.abrupt("return");case 11:this.generate(n.widgets),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[3,14]])})),function(){return o.apply(this,arguments)})},{key:"placeAds",value:(n=qe(a.mark(function t(e){return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.octopusDom=Ye(document.querySelectorAll(e)).filter(function(t){return"done"!==t.dataset.process}),this.serializeData(),this.run();case 3:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"generate",value:function(t){var e=this;ze(this.octopusDom).map(function(n){var o=n.dataset.zone,r=e.getContent(t,o);r||"3"!==o||(window.showAnchor=!0,e.handleError("noMatchCta")),r&&"done"!==n.dataset.process&&"3"!==o&&(n.innerHTML=r.compileHtml(),r.isHotelRecommendDiy&&n.classList.add("recommend-diy"),function t(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(en(e),e),e;for(var n=0,o=e.childNodes;n<o.length;)t(o[n++]);return e}(n),r.trace(),r.bindEvent(n),n.dataset.process="done")})}},{key:"getContent",value:function(t,e){var n=null,o="Zone".concat(e),r=null;if(t[o]){if((r=t[o][0]).isPreview=this.isPreview,r.octopusTags=this.octopusTags,"script"===(r=this.addClickSource(r)).content_type&&"3"!==e)return new Co(r);switch(e){case"1":n=new To(r);break;case"2":n=new No(r);break;case"3":if(window.location.hostname==="falcondemo.pixnet.net"+pix.domain_append&&"on"===Xe("is_ignore_cta"))break;n=r,window.PixnetHappixPilot&&PixnetHappixPilot.setGiftNotificationData(r);break;case"4":n=new To(r)}return n}}},{key:"addClickSource",value:function(t){var e=Xe("utm_source");if(e){var n=t.widget_content.link,o=n.includes("?")?"&":"?",r="".concat(n).concat(o,"source=").concat(e);t.widget_content.link=r}return t}},{key:"noMatchCta",value:function(){window.PixnetHappixPilot&&PixnetHappixPilot.activateHappixNotificationFlow&&PixnetHappixPilot.activateHappixNotificationFlow()}},{key:"anchorHandler",value:function(){var t=950,e=window.pageYOffset<t,n=!1,o=function(){if(window.pageYOffset>=t&&!n){if(n=!0,window.removeEventListener("scroll",o),this.checkSideSticker())return;if(!e)return void this.activeAnchor();this.activeAnchor()}}.bind(this);window.addEventListener("scroll",o)}},{key:"checkBackdrop",value:function(){return!!document.querySelector("#pixnet-backdrop-ad_frame")}},{key:"checkSideSticker",value:function(){return!!document.querySelector(".pixnet-side-sticker_side-box")}},{key:"activeAnchor",value:(e=qe(a.mark(function t(){var e,n,o,r,i,c,s,l,u;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e={bigPosition:{mainId:"3879",mergeId:"3983"},smallPosition:{mainId:"3869",mergeId:"3874"},blackPosition:{mainId:"3884"}},n={main:"smallPosition",next:"bigPosition"},(o=screen.height>=667)&&Math.random()>=.3&&(n.main="bigPosition",n.next="smallPosition"),nn()&&(n.main="blackPosition",n.next=""),r=e[n.main].mainId,"on"===Xe("is_ignore_ad_rules")&&(r=this.adNum),i='\n            <ins\n                class="adsbyfalcon"\n                data-ad-client="1"\n                data-ad-slot="'.concat(r,'"\n                ').concat(this.adNum||"blackPosition"===n.main||this.checkBackdrop()?"":'data-merge-position="'.concat(e[n.main].mergeId,'"'),"\n                ").concat(o&&"blackPosition"!==n.main?'data-next-position="'.concat(e[n.next].mainId,'"'):"","\n                ").concat(o&&"blackPosition"!==n.main&&!this.checkBackdrop()?'data-next-merge-position="'.concat(e[n.next].mergeId,'"'):"",'\n                data-embed="false"\n            ></ins>\n        '),c=document.querySelector(".anchor-ad"),"function"==typeof window.PIXFalcon&&document.body.contains(c)&&(s=new PIXFalcon,c.insertAdjacentHTML("afterbegin",i),s.placeAds(".anchor-ad")),l="3944",o&&(l="3939"),u="https://falcon.pixnet.net/ad/json/".concat(l),$e.get(u+"?version=2");case 14:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"handleError",value:function(t){window.pix&&window.pix.isMobile?this.anchorHandler():"noMatchWidget"!==t?"noMatchCta"===t&&this.noMatchCta():this.noMatchWidget()}},{key:"noMatchInRead",value:function(){var t=window.top.document.querySelector(".article-content-inner #in-read-rp"),e=window.location!==window.parent.location&&document.querySelector(".in-read-rp");if(t&&e){var n=t.querySelector("iframe");n&&n.offsetHeight&&(n.style.height=0,n.parentNode.style.height=0)}}},{key:"noMatchWidget",value:function(){this.noMatchCta(),this.noMatchInRead()}}]),t}();(Lo=qe(a.mark(function t(e){var n;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Ho(e._oq),t.next=3,n.run();case 3:case"end":return t.stop()}},t,this)})),function(t){return Lo.apply(this,arguments)})(window),window.OctopusSDK=Ho}();
